function getElementsClass(t) {
	var e = new Array,
	a = 0,
	i = document.getElementsByTagName("*");
	for (var l in i) 1 == i[l].nodeType && i[l].getAttribute("class") == t && (e[a] = i[l], a++);
	return e
}
$(function() {
	var t = $("#typecho-nav-list").children(".root").size(),
	e = "",
	a = "",
	i = "",
	l = "",
	s = "";
	if ($("#typecho-nav-list").find(".child li").eq(0).each(function() {
		$(this).remove()
	}), $("#typecho-nav-list").find(".child").eq(0).each(function() {
		e = $(this).html()
	}), $("#typecho-nav-list").find(".child").eq(1).each(function() {
		a = $(this).html()
	}), $("#typecho-nav-list").find(".child").eq(2).each(function() {
		i = $(this).html()
	}), $("#typecho-nav-list").find(".child").eq(3).each(function() {
		l = $(this).html()
	}), t > 4) for (var n = "",
	d = "fa-ding",
	c = 4; c < t; c++) $("#typecho-nav-list").find(".child").eq(c).each(function() {
		n = '<ul class="menu-ul">' + $(this).html() + "</ul>"
	}),
	$("#typecho-nav-list").find(".root").eq(c).find(".parent a").each(function() {
		"TePass" == $(this).html() && (d = "fa-rmb"),
		s = s + '<li class="menu-li"><a href="javascript:;"><i class="fa ' + d + '"></i>' + $(this).html() + '<i class="zm zm-sanJiaoBottom right"></i></a>' + n + "</li>"
	});
	var r = '<div class="user-info"><a href="' + AdminLink + '"><img src="' + UserPic + 's=100" /></a><p>欢迎您，<a href="' + AdminLink + '">' + UserName + "</a></p></div>";
	if ("administrator" == UserGroup) var o = '<div class="user-nav"><ul><li><a href="' + AdminLink + 'index.php"><i class="zm zm-zu"></i>主控制台</a></li><li><a href="' + AdminLink + 'write-post.php"><i class="zm zm-bianji"></i>撰写文章</a></li><li class="menu-li"><a href="javascript:;"><i class="zm zm-quanjushuxing"></i>全局模块<i class="zm zm-sanJiaoBottom right"></i></a><ul class="menu-ul">' + e + '</ul></li><li class="menu-li"><a href="javascript:;"><i class="zm zm-zhuomiankuaijiefangshi"></i>快捷操作<i class="zm zm-sanJiaoBottom right"></i></a><ul class="menu-ul">' + a + '</li></ul></li><li class="menu-li"><a href="javascript:;"><i class="zm zm-leibie"></i>内容管理<i class="zm zm-sanJiaoBottom right"></i></a><ul class="menu-ul">' + i + '</ul></li><li class="menu-li"><a href="javascript:;"><i class="zm zm-shezhi"></i>网站设置<i class="zm zm-sanJiaoBottom right"></i></a><ul class="menu-ul">' + l + "</ul><li>" + s + "</ul></div>";
	else if ("editor" == UserGroup || "contributor" == UserGroup) o = '<div class="user-nav"><ul><li><a href="' + AdminLink + 'index.php"><i class="zm zm-zu"></i>主控制台</a></li><li><a href="' + AdminLink + 'profile.php"><i class="zm zm-shezhi"></i>个人设置</a></li><li><a href="' + AdminLink + 'write-post.php"><i class="zm zm-bianji"></i>撰写文章</a></li><li><a href="' + AdminLink + 'manage-posts.php"><i class="zm zm-leibie"></i>我的文章</a></li><li><a href="' + AdminLink + '/manage-comments.php"><i class="zm zm-quanjushuxing"></i>管理评论</a></li></ul></div>';
	else o = '<div class="user-nav"><ul><li><a href="' + AdminLink + 'index.php"><i class="zm zm-zu"></i>主控制台</a></li><li><a href="' + AdminLink + 'profile.php"><i class="zm zm-shezhi"></i>个人设置</a></li></ul></div>';
	if ("" != UserGroup) {
		$("#typecho-nav-list").html(r + o),
		$('.typecho-head-nav .operate').eq(0).prepend('<a id="ws-day-night" href="javascript:;"><i class="zm zm-heiye"></i></a>'),
		$('.typecho-head-nav .operate').eq(0).prepend('<a id="tonav" href="javascript:;"><i class="zm zm-caidan"></i></a>'),
		$('#typecho-nav-list').before('<div class="proup"></div>'),
		$('#tonav').click(function(event) {
		    event.stopPropagation(),
			$('#typecho-nav-list').toggle()
			$('.proup').toggle()
		}),
        $(document).click(function(event){
    		  var _con = $('#typecho-nav-list');
    		  if(!_con.is(event.target) && _con.has(event.target).length == 0){
    			$('#typecho-nav-list').hide()
    			$('.proup').hide()
    		  }
    	}),
		"个人设置" == MenuTitle && ($('.profile-avatar').eq(0).css('width','150px').attr('src',UserPic + "s=640"),$(".typecho-page-main").find("div:eq(0)").attr("style", "text-align:center"));
	} else {
		var v = getElementsClass("i-logo")[0],
		q = getElementsClass("body-100")[0],
		g = document.createElement("div");
		g.id = "cover",
		q.appendChild(g),
		v.innerHTML = '<img src="' + SiteLink + 'img/logo.png" alt="' + SiteName + '"/>'
	}
	$("#typecho-nav-list").find("li.focus").each(function() {
		$(this).parent(".menu-ul").show()
	}),
	$("body").on("click", ".menu-li",
	function() {
		$(this).find(".menu-ul").is(":hidden") && $(".menu-ul").hide(200),
		$(this).find(".menu-ul").slideToggle(200)
	}),
	$("body").on("click", "#wmd-fullscreen-button",
	function() {
		$(".main").addClass("main-in")
	}),
	$("body").on("click", "#wmd-exit-fullscreen-button",
	function() {
		$(".main").removeClass("main-in")
	}),
	$(".typecho-list-table").find("colgroup").each(function() {
		$(this).remove()
	}),
	"插件管理" == MenuTitle && ($(".typecho-table-wrap tr").find("td:eq(0)").attr("style", "float:none;padding:10px"), $(".typecho-list-table tr").find("td:eq(0)").attr("data-label", "名称："), $(".typecho-list-table tr").find("td:eq(1)").attr("data-label", "描述："), $(".typecho-list-table tr").find("td:eq(2)").attr("data-label", "版本："), $(".typecho-list-table tr").find("td:eq(3)").attr("data-label", "作者："), $(".typecho-list-table tr").find("td:eq(4)").attr("data-label", "操作：")),
	"管理文章" == MenuTitle && ($(".typecho-list-table tr").find("th:eq(1)").text("评论"), $(".typecho-list-table tr").find("td:eq(1)").attr("data-label", "评论："), $(".typecho-list-table tr").find("td:eq(2)").attr("data-label", "标题："), $(".typecho-list-table tr").find("td:eq(3)").attr("data-label", "作者："), $(".typecho-list-table tr").find("td:eq(4)").attr("data-label", "分类："), $(".typecho-list-table tr").find("td:eq(5)").attr("data-label", "日期：")),
	"管理页面" == MenuTitle && ($(".typecho-list-table tr").find("th:eq(1)").text("评论"), $(".typecho-list-table tr").find("td:eq(1)").attr("data-label", "评论："), $(".typecho-list-table tr").find("td:eq(2)").attr("data-label", "标题："), $(".typecho-list-table tr").find("td:eq(3)").attr("data-label", "缩略名："), $(".typecho-list-table tr").find("td:eq(4)").attr("data-label", "作者："), $(".typecho-list-table tr").find("td:eq(5)").attr("data-label", "日期：")),
	"管理评论" == MenuTitle && ($(".typecho-list-table tr").find("td:eq(2)").attr("data-label", "评论者："), $(".typecho-list-table tr").find("td:eq(3)").attr("data-label", "发表于：")),
	"管理分类" == MenuTitle && ($(".typecho-list-table tr").find("td:eq(1)").attr("data-label", "名称："), $(".typecho-list-table tr").find("td:eq(2)").attr("data-label", "子分类："), $(".typecho-list-table tr").find("td:eq(3)").attr("data-label", "缩略名："), $(".typecho-list-table tr").find("td:eq(5)").attr("data-label", "文章数：")),
	"管理用户" == MenuTitle && ($(".typecho-list-table tr").find("th:eq(1)").text("文章数"), $(".typecho-list-table tr").find("td:eq(1)").attr("data-label", "文章数："), $(".typecho-list-table tr").find("td:eq(2)").attr("data-label", "用户名："), $(".typecho-list-table tr").find("td:eq(3)").attr("data-label", "昵称："), $(".typecho-list-table tr").find("td:eq(4)").attr("data-label", "邮件："), $(".typecho-list-table tr").find("td:eq(5)").attr("data-label", "用户组：")),
	localStorage.getItem("ws-day-night") ? ($("html").attr("ws-day-night", "ws-day-night"), $("#ws-day-night").html('<i class="zm zm-baitian"></i>')) : ($("html").removeAttr("ws-day-night", "ws-day-night"), $("#ws-day-night").html('<i class="zm zm-heiye"></i>')),
	$("#ws-day-night").on("click",
	function() {
		$("html").attr("ws-day-night") ? ($("html").removeAttr("ws-day-night"), localStorage.removeItem("ws-day-night"), $("#ws-day-night").html('<i class="zm zm-heiye"></i>')) : ($("html").attr("ws-day-night", "ws-day-night"), localStorage.setItem("ws-day-night", "ws-day-night"), $("#ws-day-night").html('<i class="zm zm-baitian"></i>'))
	});
});